!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";const t=function(t,e,n,a=1){const i=t.getContext("2d"),o=(t=>(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1))(i);return t.width=e*o,t.height=n*o,t.style.width=e*a+"px",t.style.height=n*a+"px",i.setTransform(o,0,0,o,0,0),t};function e(t,e){const n=new Image;return n.src=t,e&&n.addEventListener("load",(()=>e(n)),!1),n}const n=(t,e,n,a=n)=>{const i=e.width/n;let o=0;return setInterval((()=>{o=(o+1)%i}),125),(i,r,d=1)=>t.drawImage(e,o*n,0,n,a,i*n,r*a,n,a)},a=e("img/tileset.png"),i=e("img/Characters/Bat.png"),o=e("img/Characters/Skeleton_idle.png"),r=e("img/Characters/Knight_idle.png"),d=e("img/Characters/Knight_idle_flip.png"),c=e("img/Characters/Slime (green).png"),s=e("img/Objects and traps/Gold coin.png");const h=(t,e,n,a)=>{const i=[];for(let o=e;o<a;o++)for(let e=t;e<n;e++)i.push([e,o]);return function(t){for(var e=t.length-1;e>0;e--){var n=Math.floor(Math.random()*(e+1)),a=t[e];t[e]=t[n],t[n]=a}}(i),i};let l,f,g,w,m,u,p,x,y,M,v,k,E,C,S,X,Y,b,R={};const B=16;function P(){Y=!1,b=2;const t=h(1,1,11,7).filter((([t,e])=>Math.abs(t-y)>1||Math.abs(e-M)>1));[S,X]=t.pop(),C=[{spr:f,x:S,y:X}],[x,x,w,m,p].forEach((e=>{const[n,a]=t.pop();C.push({spr:e,x:n,y:a})}))}window.addEventListener("keydown",(function(t){R[t.keyCode]=!0})),window.addEventListener("keyup",(function(t){R[t.keyCode]=!1})),window.addEventListener("load",(function(){!function(){const e=document.getElementById("root");t(e,192,128,3),l=e.getContext("2d"),l.imageSmoothingEnabled=!1,g=((t,e,n,a=n)=>(i,o,r,d)=>t.drawImage(e,i*n,o*a,n,a,r*n,d*a,n,a))(l,a,B),w=n(l,i,B),m=n(l,o,B),u=[n(l,r,B),n(l,d,B)],p=n(l,c,B),x=n(l,s,B),f=(t,e)=>g(8,1,t,e),y=2,M=2,v=0}(),P(),_()}));const I={37:()=>{y>1&&y--,v=1},38:()=>{M>1&&M--},39:()=>{y<10&&y++,v=0},40:()=>{M<6&&M++}},L=(t,e)=>{const n=[];return t>1&&n.push([t-1,e]),e>1&&n.push([t,e-1]),t<10&&n.push([t+1,e]),e<6&&n.push([t,e+1]),(a=n)[Math.floor(Math.random()*a.length)];var a};function _(){Y?b<1?b+=Math.min(1-b,1/15):P():(b>0&&(b-=Math.min(b,1/15)),y===S&&M===X&&(Y=!0)),Y||Object.entries(I).forEach((([t,e])=>{R[t]&&(R[t]=!1,e(),C.slice(3).forEach((t=>{const[e,n]=L(t.x,t.y);t.x=e,t.y=n})))})),l.clearRect(0,0,192,128);for(let t=1;t<7;t++)for(let e=1;e<11;e++)g(1,1,e,t);g(0,0,0,0);for(let t=1;t<11;t++)g(1,0,t,0);g(2,0,11,0),g(0,2,0,7);for(let t=1;t<11;t++)g(1,2,t,7);g(2,2,11,7);for(let t=0;t<7;t++)g(0,1,0,t);for(let t=0;t<7;t++)g(2,1,11,t);C.forEach((t=>{void 0===t.drawX&&(t.drawX=t.x),void 0===t.drawY&&(t.drawY=t.y),t.drawX<t.x&&(t.drawX+=Math.min(t.x-t.drawX,.2)),t.drawY<t.y&&(t.drawY+=Math.min(t.y-t.drawY,.2)),t.drawX>t.x&&(t.drawX-=Math.min(t.drawX-t.x,.2)),t.drawY>t.y&&(t.drawY-=Math.min(t.drawY-t.y,.2)),t.spr(t.drawX,t.drawY)})),void 0===k&&(k=y),void 0===E&&(E=M),k<y&&(k+=Math.min(y-k,.2)),E<M&&(E+=Math.min(M-E,.2)),k>y&&(k-=Math.min(k-y,.2)),E>M&&(E-=Math.min(E-M,.2)),u[v](k,E),b>0&&(l.fillStyle=`rgba(39, 29, 42, ${b})`,l.fillRect(0,0,192,128)),requestAnimationFrame(_)}}));
